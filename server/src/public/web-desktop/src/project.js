require=function e(t,a,n){function r(o,c){if(!a[o]){if(!t[o]){var s="function"==typeof require&&require;if(!c&&s)return s(o,!0);if(i)return i(o,!0);var l=new Error("Cannot find module '"+o+"'");throw l.code="MODULE_NOT_FOUND",l}var u=a[o]={exports:{}};t[o][0].call(u.exports,function(e){var a=t[o][1][e];return r(a?a:e)},u,u.exports,e,t,a,n)}return a[o].exports}for(var i="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({ApiClient:[function(e,t,a){"use strict";function n(e){this.endPoint=e;var t=document.getElementById("GameCanvas"),a=t.getAttribute("gof-access-token");a&&(this.accessToken=a)}function r(e){if(!e)return"";for(var t="",a=Object.keys(e),n=0;n<a.length;++n)n>0&&(t+="&"),t+=a[n]+"="+encodeURIComponent(e[a[n]]);return t.length>0?t:null}function i(e,t,a,n){return c(e,"GET",t,a,n)}function o(e,t,a){var n=c(e,"POST",t,null,a);return n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n}function c(e,t,a,n,i){var o=new XMLHttpRequest,c=r(n),s=e.endPoint+a+(c.length?"?"+c:"");return o.open(t,s,!0),e.accessToken&&o.setRequestHeader("Authorization","Bearer "+e.accessToken),o.onreadystatechange=function(t){if(4==o.readyState){var a=null;try{a=JSON.parse(o.responseText)}catch(n){}return 200!==o.status&&i?void i(a,null,e):void(i&&i(null,a,e))}},o}cc._RF.push(t,"a5aaaraT9pJs4mh90pQOvW8","ApiClient"),n.prototype.checkAuth=function(e){var t=i(this,"/auth/check",null,e);t.send(null)},n.prototype.login=function(e,t,a){var n=o(this,"/auth/login",function(e,t,n){t&&(n.accessToken=t.payload.accessToken),a(e,t,n)}),i=r({email:e,password:t});n.send(i)},n.prototype.getPlant=function(e,t){var a=i(this,"/plants/"+encodeURIComponent(e),null,t);a.send()},n.prototype.getPlants=function(e,t){var a=i(this,"/plants",e,t);a.send()},t.exports=n,cc._RF.pop()},{}],1:[function(e,t,a){"use strict";t.exports=Object.freeze({CultureModeEnum:{NORMAL:"normal",BIO:"bio",PERMACULTURE:"permaculture"}})},{}],Farm:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"a0071wrzthDjJMdvjOEmTUS","Farm"),Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=e("Parcel"),c=(n(o),e("GamePhase")),s=(n(c),function(){function e(t,a){r(this,e),this.name=t,void 0===a?this.totalSurface=0:this.totalSurface=a,this.parcels=[],this.possibleSpecies=[],this.money=0,this.year=0,this.month=0,this.week=0}return i(e,[{key:"addParcel",value:function(e){this.parcels.push(e)}},{key:"findParcelAt",value:function(e){for(var t=0;t<this.parcels.length;t++){var a=this.parcels[t];if(a.hasTile(e))return a}return null}},{key:"findParcelAdjacent",value:function(e){for(var t=0;t<this.parcels.length;t++){var a=this.parcels[t];if(a.isAdjacent(e))return a}return null}},{key:"findParcelUID",value:function(e){if(void 0!==e)for(var t=0;t<this.parcels.length;t++){var a=this.parcels[t];if(a.uid===e)return a}return null}}]),e}());a["default"]=s,t.exports=a["default"],cc._RF.pop()},{GamePhase:"GamePhase",Parcel:"Parcel"}],GamePhase:[function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"3ac1bWprMFKCozrFNz9biyB","GamePhase"),Object.defineProperty(a,"__esModule",{value:!0});var r=function i(){n(this,i),this.uid="assolement",this.startMoney=5e4,this.startMonth=7,this.startWeek=3,this.startYearDiff=0,this.perfectScore=0,this.parcels=[{uid:"parcel1",history:["ble","ble","orge","fallow","fallow"]},{uid:"parcel2",history:["pois","avoine","ble","ble","fallow"]},{uid:"parcel3",history:["lupin","lupin","colza","colza","fallow"]},{uid:"parcel4",history:["orge","sarrasin","seigle","sarrasin","fallow"]},{uid:"parcel5",history:["tournesol","mais","fallow","avoine","lupin"]},{uid:"parcel6",history:["fallow","fallow","carotte","pois","fallow"]},{uid:"parcel7",history:["lupin","lupin","triticale","fallow","ble"]}]};a["default"]=r,t.exports=a["default"],cc._RF.pop()},{}],Game:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"37f159UDU9GBpEOdPYC0xWt","Game"),Object.defineProperty(a,"__esModule",{value:!0}),a["default"]=void 0;var i=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),o=e("GamePhase"),c=(n(o),e("Farm")),s=n(c),l=e("LanguageData"),u=!1,p={LANGUAGE_DEFAULT:"fr",SERVICES_URL:"http://gof.julien.dev:3000/"},f={LANGUAGE_DEFAULT:"fr",SERVICES_URL:"https://game-of-farms.ekylibre.com"},h=null,d=function(){function e(){return r(this,e),this._currPhase=null,h?h:(h=this,this.isDebug=u,u?this.config=p:this.config=f,l.init(this.config.LANGUAGE_DEFAULT),void(this.farm=new s["default"]))}return i(e,[{key:"phase",get:function(){return this._currPhase},set:function(e){if(void 0!==e&&null!==e){if(null!==this._currPhase&&this._currPhase.uid==e.uid)return;if(this.farm.month=e.startMonth,this.farm.week=e.startWeek,null===this._currPhase){this.farm.money=e.startMoney;for(var t=0;t<e.parcels.length;t++){var a=e.parcels[t],n=this.farm.findParcelUID(a.uid);null!=n?n.rotationHistory=a.history:cc.error("Could not find parcel uid "+a.uid)}}else this.farm.year+=e.startYearDiff;this._currPhase=e}else this._currPhase=null}}]),e}();a["default"]=d,t.exports=a["default"],cc._RF.pop()},{Farm:"Farm",GamePhase:"GamePhase",LanguageData:"LanguageData"}],LanguageData:[function(e,t,a){"use strict";function n(e){return window.i18n.languages[e]}function r(e){e&&(o?o.replace(e):o=new i({phrases:e,allowMissing:!0}))}cc._RF.push(t,"61de062n4dJ7ZM9/Xdumozn","LanguageData");var i=e("polyglot.min"),o=null;window.i18n||(window.i18n={languages:{},curLang:""}),t.exports={init:function(e){if(!e||e!==window.i18n.curLang){var t=null;e?(t=n(e),window.i18n.curLang=e):t=n(window.i18n.curLang),r(t)}},t:function(e,t){if(o)return o.t(e,t)},inst:o,updateSceneRenderers:function(){for(var e=cc.director.getScene().children,t=[],a=0;a<e.length;++a){var n=e[a].getComponentsInChildren("LocalizedLabel");Array.prototype.push.apply(t,n)}for(var r=0;r<t.length;++r){var i=t[r];i.updateLabel()}for(var o=[],c=0;c<e.length;++c){var s=e[c].getComponentsInChildren("LocalizedSprite");Array.prototype.push.apply(o,s)}for(var l=0;l<o.length;++l){var u=o[l];u.updateSprite(window.i18n.curLang)}}},cc._RF.pop()},{"polyglot.min":"polyglot.min"}],LocalizedLabelExt:[function(e,t,a){"use strict";cc._RF.push(t,"7eb01WD8EJDeZNKJNi9e5fa","LocalizedLabelExt");var n=e("LanguageData");cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedTextExt"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:"",forceUppercase:{get:function(){return this._forceUppercase},set:function(e){this._forceUppercase!==e&&(this._forceUppercase=e,this.updateLabel())}},_forceUppercase:!1},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e||(e=this.getComponent(cc.RichText)),e)return this.label=e,void this.updateLabel()},updateLabel:function(){if(!this.label)return void cc.error("Failed to update localized text!");var e=n.t(this.dataID);e?(this.forceUppercase&&(e=e.toUpperCase()),this.label.string=e):cc.warn("Missing text id: "+this.dataID)}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedLabel:[function(e,t,a){"use strict";cc._RF.push(t,"744dcs4DCdNprNhG0xwq6FK","LocalizedLabel");var n=e("LanguageData");cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,menu:"i18n/LocalizedLabel"},properties:{dataID:{get:function(){return this._dataID},set:function(e){this._dataID!==e&&(this._dataID=e,this.updateLabel())}},_dataID:""},onLoad:function(){n.inst||n.init(),this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Label);if(e)return this.label=e,void this.updateLabel()},updateLabel:function(){if(!this.label)return void cc.error("Failed to update localized label, label component is invalid!");var e=n.t(this.dataID);e&&(this.label.string=n.t(this.dataID))}}),cc._RF.pop()},{LanguageData:"LanguageData"}],LocalizedSprite:[function(e,t,a){"use strict";cc._RF.push(t,"f34ac2GGiVOBbG6XlfvgYP4","LocalizedSprite");var n=e("SpriteFrameSet");cc.Class({"extends":cc.Component,editor:{executeInEditMode:!0,inspector:"packages://i18n/inspector/localized-sprite.js",menu:"i18n/LocalizedSprite"},properties:{spriteFrameSet:{"default":[],type:n}},onLoad:function(){this.fetchRender()},fetchRender:function(){var e=this.getComponent(cc.Sprite);if(e)return this.sprite=e,void this.updateSprite(window.i18n.curLang)},getSpriteFrameByLang:function(e){for(var t=0;t<this.spriteFrameSet.length;++t)if(this.spriteFrameSet[t].language===e)return this.spriteFrameSet[t].spriteFrame},updateSprite:function(e){if(!this.sprite)return void cc.error("Failed to update localized sprite, sprite component is invalid!");var t=this.getSpriteFrameByLang(e);!t&&this.spriteFrameSet[0]&&(t=this.spriteFrameSet[0].spriteFrame),this.sprite.spriteFrame=t}}),cc._RF.pop()},{SpriteFrameSet:"SpriteFrameSet"}],MapCtrl:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"e2e73B/wgFOW6TFModC0XXp","MapCtrl");var r=e("Game"),i=n(r),o=e("GamePhase"),c=n(o),s=e("Farm"),l=(n(s),e("Parcel")),u=n(l),p=e("UIParcelButton"),f=n(p),h=new i["default"],d=e("UIOffice"),g=e("UIDebug"),m=e("LanguageData"),y=cc.Class({"extends":cc.Component,editor:{requireComponent:cc.ScrollView,menu:"gof/MapCtrl"},properties:{mapUILayer:{"default":null,type:cc.Node,displayName:"UI layer"},startOffset:{"default":new cc.Vec2(0,0),displayName:"Scroll starting pos"},mapParcels:{"default":[],type:[cc.TiledMap],displayName:"Parcels maps"},mapSprouts:{"default":[],type:[cc.TiledMap],displayName:"Sprouts maps"},mapObjects:{"default":[],type:[cc.TiledMap],displayName:"Objects maps"},parcelsGID:{"default":[],type:[cc.Integer],displayName:"Parcels GID"},parcelButtonPrefab:{"default":null,type:cc.Prefab,displayName:"Prefab Parcels button"},debugLabelPrefab:{"default":null,type:cc.Prefab}},statics:{instance:null},_mapScrollView:null,_refMap:null,_refLayer:null,onLoad:function(){null==y.instance?y.instance=this:cc.error("An instance of MapCtrl already exists"),this._mapScrollView=this.getComponent(cc.ScrollView),this.initTouch()},start:function(e){e||(this._mapScrollView.scrollToOffset(this.startOffset),this.findParcels(),h.isDebug&&this.addDebugInfo(),null===h.phase&&(h.phase=new c["default"]))},initTouch:function(){var e=this;if(this._mapScrollView._onMouseWheel=function(e,t){if(this.enabledInHierarchy&&!this._hasNestedViewGroup(e,t)){var a=cc.p(0,0),n=-.1;this.vertical?a=cc.p(0,e.getScrollY()*n):this.horizontal&&(a=cc.p(e.getScrollY()*n,0)),this._stopPropagationIfTargetIsMe(e)}},this.mapParcels&&this.mapParcels.length>0)this._refMap=this.mapParcels[0],this._refLayer=this._refMap.allLayers()[0];else{if(!(this.mapSprouts&&this.mapSprouts.length>0))return void cc.error("At least one parcel or sprout TiledMap is required");this._refMap=this.mapSprouts[0],this._refLayer=this._refMap.allLayers()[0]}this.node.on(cc.Node.EventType.TOUCH_START,function(t){e._scrollLen=0},this.node),this.node.on(cc.Node.EventType.TOUCH_MOVE,function(t){e._scrollLen+=cc.pLength(t.touch.getDelta())},this.node),this.node.on(cc.Node.EventType.TOUCH_END,function(t){if(e._scrollLen>2)return void(e._scrollLen=0);var a=t.touch,n=e._refMap.node.convertToNodeSpace(a.getLocation());if(g.touchLog=""+a.getLocationX()+","+a.getLocationY()+" => "+n,e.mapObjects&&e.mapObjects.length>0)for(var r=0;r<e.mapObjects.length;r++)if(e.touchOnMap(e.mapObjects[r],n))return;if(e.mapSprouts&&e.mapSprouts.length>0)for(var r=0;r<e.mapSprouts.length;r++)if(e.touchOnMap(e.mapSprouts[r],n))return;if(e.mapParcels&&e.mapParcels.length>0)for(var r=0;r<e.mapParcels.length;r++)if(e.touchOnMap(e.mapParcels[r],n))return},this.node)},touchOnMap:function(e,t){for(var a=e.getMapSize(),n=e.allLayers(),r=e.getObjectGroups(),i=r.length-1;i>=0;i--)for(var o=r[i],c=o.getObjects(),s=0;s<c.length;s++){var l=c[s],u=.15,p=l.sgNode.width*(1-2*u),f=p/2,m=l.sgNode.height*u,y=l.sgNode.height*(1-2*u),v=cc.rect(l.sgNode.x-f,l.sgNode.y+m,p,y);if(v.contains(t))return h.isDebug&&g.log("Clicked on object "+l.name),d.instance.show(),!0}for(var i=n.length-1;i>=0;i--){var P=n[i],b=P.getMapTileSize().width,_=P.getMapTileSize().height,L=P.getLayerSize().width,w=P.getLayerSize().height,S=1*t.x,I=1*t.y,F=Math.floor(w-I/_+S/b-L/2),D=Math.floor(w-I/_-S/b+L/2);if(F>=0&&D>=0&&F<a.width&&D<a.height){var U=cc.v2(F,D),C=P.getTileGIDAt(U);if(0!=C){if(h.isDebug){var R="Clicked on layer "+P.getLayerName()+" tile("+F+","+D+") GID="+C,T=h.farm.findParcelAt(U);null!=T&&(R+=" Parcel: "+T.name),g.log(R)}return!0}}}return!1},tileToUI:function(e){var t=this._refMap.getTileSize(),a=this._refLayer.getPositionAt(e);return a.y+=.5*t.height,this.mapToUI(a)},mapToUI:function(e){return cc.v2(e.x-.5*this.mapUILayer.width,e.y-.5*this.mapUILayer.height)},findParcels:function(){if(this.mapParcels&&this.parcelsGID&&this.parcelsGID.length>0)for(var e=0,t=0;t<this.mapParcels.length;t++){for(var a=this.mapParcels[t].getMapSize(),n=0;n<this.mapParcels[t].allLayers().length;n++)for(var r=this.mapParcels[t].allLayers()[n],i=0;i<a.height;i++)for(var o=0;o<a.width;o++)if(this.parcelsGID.includes(r.getTileGIDAt(o,i))){var c=new cc.Vec2(o,i),s=h.farm.findParcelAdjacent(c);if(null!=s&&s.tiledLayer==r)s.addTile(c);else{var l="parcel"+(h.farm.parcels.length+1),p=m.t("parcel")+" "+String(h.farm.parcels.length+1);s=new u["default"](l,p,r),s.addTile(c),h.farm.addParcel(s)}e++}h.farm.totalSurface=e}if(h.farm.parcels.length>0)for(var d=0;d<h.farm.parcels.length;d++){var s=h.farm.parcels[d],g=cc.instantiate(this.parcelButtonPrefab),y=g.getComponent(f["default"]);y.parcel=s,g.setParent(this.mapUILayer),g.setPosition(this.tileToUI(s.rect.center))}else cc.error("No parcels found! Please check you filled the mapParcel and parcelGID arrays")},addDebugInfo:function(){if(this.mapObjects)for(var e=0;e<this.mapObjects.length;e++)for(var t=this.mapObjects[e].getObjectGroups(),a=t.length-1;a>=0;a--)for(var n=t[a],r=n.getObjects(),i=0;i<r.length;i++){var o=r[i],c=cc.v2(o.sgNode.x,o.sgNode.y),s=cc.instantiate(this.debugLabelPrefab);s.setParent(this.mapUILayer),s.setPosition(this.mapToUI(c));var l=s.getComponentInChildren(cc.Label);l.string=o.name+": "+Math.floor(o.sgNode.x)+","+Math.floor(o.sgNode.y)}cc.log("NbParcels="+h.farm.parcels.length);for(var e=0;e<h.farm.parcels.length;e++){var u=h.farm.parcels[e];cc.log(u.name+": "+u.tiles.length)}},__Debug:function(){}});cc._RF.pop()},{Farm:"Farm",Game:"Game",GamePhase:"GamePhase",LanguageData:"LanguageData",Parcel:"Parcel",UIDebug:"UIDebug",UIOffice:"UIOffice",UIParcelButton:"UIParcelButton"}],Parcel:[function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"65708Jw+k5C1oyCvtOGSAar","Parcel"),Object.defineProperty(a,"__esModule",{value:!0});var r=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),i=cc.Enum({EMPTY:0,FALLOW:1,PLOWED:2,SEEDS:4,GROWING:5,READY:6}),o=function(){function e(t,a,r){n(this,e),this.uid=t,void 0===a?this.name="":this.name=a,this.tiledLayer=r,this.tiles=[],this.rect=cc.rect(),this.state=i.EMPTY,this.surface=0,this.rotationHistory=[],this.rotationPrevision=[]}return r(e,[{key:"hasTile",value:function(e){for(var t=0;t<this.tiles.length;t++)if(this.tiles[t].x===e.x&&this.tiles[t].y===e.y)return!0;return!1}},{key:"isAdjacent",value:function(e){for(var t=0;t<this.tiles.length;t++){var a=this.tiles[t];if(1==Math.abs(a.x-e.x)&&0==Math.abs(a.y-e.y))return!0;if(1==Math.abs(a.y-e.y)&&0==Math.abs(a.x-e.x))return!0}return!1}},{key:"addTile",value:function(e){this.tiles.push(e),0==this.rect.width&&(this.rect.x=e.x,this.rect.y=e.y,this.rect.width=1,this.rect.height=1),this.rect.x>e.x&&(this.rect.x=e.x),this.rect.xMax<e.x&&(this.rect.width=e.x-this.rect.x),this.rect.y>e.y&&(this.rect.y=e.y),this.rect.yMax<e.y&&(this.rect.height=e.y-this.rect.y),this.surface++}}]),e}();a["default"]=o,t.exports=a["default"],cc._RF.pop()},{}],Plant:[function(e,t,a){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}cc._RF.push(t,"5c449arTcdBdrBCkvQ3zcI7","Plant"),Object.defineProperty(a,"__esModule",{value:!0});var r=(e("../../../common/constants"),function i(){n(this,i),this.dbId=0,this.dbData=null,this.tiledGID=[]});a["default"]=r,t.exports=a["default"],cc._RF.pop()},{"../../../common/constants":1}],SpriteFrameSet:[function(e,t,a){"use strict";cc._RF.push(t,"97019Q80jpE2Yfz4zbuCZBq","SpriteFrameSet");var n=cc.Class({name:"SpriteFrameSet",properties:{language:"",spriteFrame:cc.SpriteFrame}});t.exports=n,cc._RF.pop()},{}],Startup:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}function r(e){e.getPlants({cultureMode:"normal",__v:0},function(e,t,a){console.log("client.getPlants response"),console.log(t),console.log("client.getPlants ERROR"),console.log(e)}),e.getPlant("598041ce31dc2c27ecfd7d2a",function(e,t,a){console.log("client.getPlant response"),console.log(t),console.log("client.getPlant ERROR"),console.log(e)})}cc._RF.push(t,"ae2f9bQf21IhJYFeGxAPR6E","Startup");var i=e("Game"),o=n(i),c=(e("LanguageData"),e("./ApiClient"));new o["default"];cc.Class({"extends":cc.Component,editor:{menu:"gof/Startup"},properties:{},onLoad:function(){var e="/api",t="localhost"==location.hostname&&3e3!=location.port;t&&(e="http://gof.julien.dev:3000/api");var a=new c(e);a.checkAuth(function(e,n,i){if(e){if(!t)return void console.log("going /");var o=prompt("email"),c=prompt("password");i.login(o,c,function(e,t,n){e||(document.cookie="access_token="+t.payload.accessToken,r(a))})}r(a)})}}),cc._RF.pop()},{"./ApiClient":"ApiClient",Game:"Game",LanguageData:"LanguageData"}],UIDebug:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"18ea2AjTFtAb7SJWmEwfDmn","UIDebug");var r=e("Game"),i=n(r),o=new i["default"],c=cc.Class({"extends":cc.Component,editor:{menu:"gof/UIDebug"},properties:{debugLabel:{"default":null,type:cc.Label},touchLabel:{"default":null,type:cc.Label},mapScrollView:{"default":null,type:cc.ScrollView}},statics:{instance:null,_log:[],log:function(e){c._log.unshift(e),c._log.length>5&&c._log.pop()},touchLog:""},onLoad:function(){null!=c.instance&&cc.error("UIDebug instance already loaded"),c.instance=this,o.isDebug?c.log("isDebug="+o.isDebug+"\n"+o.config.SERVICES_URL):(this.debugLabel.string="",this.touchLabel.string="")},start:function(e){},update:function(e){if(o.isDebug){if(null!=this.debugLabel){this.debugLabel.string="";for(var t=0;t<c._log.length;t++)this.debugLabel.string+=c._log[t]+"\n"}null!=this.touchLabel&&(this.touchLabel.string=c.touchLog,null!=this.mapScrollView&&(this.touchLabel.string+=" scrollOffset="+this.mapScrollView.getScrollOffset()))}}});cc._RF.pop()},{Game:"Game"}],UIOffice:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"6a190mC+6ZOA5vlgY1st6XK","UIOffice");var r=e("UIPopupBase"),i=n(r),o=e("Game"),c=n(o),s=e("LanguageData"),l=cc.Class({"extends":i["default"],editor:{menu:"gof/UIOffice"},properties:{farmName:{"default":null,type:cc.Label},totalSurface:{"default":null,type:cc.Label},nbParcels:{"default":null,type:cc.Label}},statics:{instance:null},onLoad:function(){l.instance=this,this.initPopup()},onShow:function(){var e=new c["default"],t=e.farm.name;void 0===t&&(t=s.t("farmDefaultName")),this.farmName.string=t,this.totalSurface.string=s.t("surfaceHectare",{val:e.farm.totalSurface}),this.nbParcels.string=e.farm.parcels.length.toString()},update:function(e){},onBtClose:function(){this.hide()}});cc._RF.pop()},{Game:"Game",LanguageData:"LanguageData",UIPopupBase:"UIPopupBase"}],UIParcelButton:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"1eeb4QRRqVC67SdkLrVyELP","UIParcelButton");var r=e("Parcel"),i=n(r),o=e("UIParcel");cc.Class({"extends":cc.Component,editor:{menu:"gof/UIParcelButton"},properties:{parcelName:{"default":null,type:cc.Label},parcel:{visible:!1,get:function(){return this._parcel},set:function(e){this._parcel=e,null!=this._parcel&&null!=this.parcelName&&(this.parcelName.string=this._parcel.name)},type:i["default"]}},_parcel:null,onLoad:function(){},onButtonClick:function(){o.instance.parcel=this.parcel,o.instance.show()}}),cc._RF.pop()},{Parcel:"Parcel",UIParcel:"UIParcel"}],UIParcelHistoryItem:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"e26d4zHk5xHfoZ0d5p3J3O6","UIParcelHistoryItem");var r=e("Parcel"),i=(n(r),e("LanguageData"));cc.Class({"extends":cc.Component,editor:{menu:"gof/UIParcelHistoryItem"},properties:{plantAtlas:{"default":null,type:cc.SpriteAtlas},plantDisAtlas:{"default":null,type:cc.SpriteAtlas},icon:{"default":null,type:cc.Sprite},species:{"default":null,type:cc.Label},culture:{"default":null,type:cc.Label},year:{"default":null,type:cc.Label},btAdd:{"default":null,type:cc.Button}},onLoad:function(){},init:function(e,t,a){var n;n=e<0?e.toString():"+"+e.toString(),this.year.string=i.t("parcelHistoryYear",{val:n}),void 0===t?(this.species.string=i.t("new").toUpperCase(),this.culture.string="",this.icon.node.active=!1,this.btAdd.node.active=!0):"fallow"==t?(this.species.string=i.t(t),this.culture.string="",this.icon.node.active=!0,this.icon.spriteFrame=this.plantAtlas.getSpriteFrame("ico_prairies"),this.btAdd.node.active=!1):(this.species.string=i.t("plant_"+t).toUpperCase(),void 0!==a?this.culture.string=i.t("culture_"+a).toUpperCase():this.culture.string=i.t("culture_normal").toUpperCase(),this.icon.node.active=!0,this.icon.spriteFrame=this.plantAtlas.getSpriteFrame("ico_"+t),this.btAdd.node.active=!1)},onBtAdd:function(){cc.error("UIParcelHistoryItem::onBtAdd: TODO")}}),cc._RF.pop()},{LanguageData:"LanguageData",Parcel:"Parcel"}],UIParcel:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"5ed45J19xFADpo251R2d6oz","UIParcel");var r=e("UIPopupBase"),i=n(r),o=e("Parcel"),c=n(o),s=e("UIParcelHistoryItem"),l=n(s),u=e("LanguageData"),p=cc.Class({"extends":i["default"],editor:{menu:"gof/UIParcel"},properties:{parcelName:{"default":null,type:cc.Label},parcelGroundType:{"default":null,type:cc.Label},parcelSurface:{"default":null,type:cc.Label},historyScrollView:{"default":null,type:cc.ScrollView},previsionScrollView:{"default":null,type:cc.ScrollView},plantPrefab:{"default":null,type:cc.Prefab},parcel:{visible:!1,get:function(){return this._parcel},set:function(e){this._parcel=e,null!=this._parcel&&null!=this.parcelName,this._hidden||this.onShow()},type:c["default"]}},statics:{instance:null},_parcel:null,onLoad:function(){p.instance=this,this.initPopup()},onShow:function(){var e=this.historyScrollView.content;e.removeAllChildren(!0);var t=this.previsionScrollView.content;if(t.removeAllChildren(!0),null!=this._parcel){this.parcelName.string=this._parcel.name,this.parcelSurface.string=u.t("surfaceHectare",{val:this._parcel.surface.toString()});for(var a=this._parcel.rotationHistory.length-1;a>=0;a--){var n=cc.instantiate(this.plantPrefab);n.setParent(e);var r=n.getComponent(l["default"]);r.init(-(a+1),this._parcel.rotationHistory[a])}for(var a=0;a<this._parcel.rotationPrevision.length;a++){var n=cc.instantiate(this.plantPrefab);n.setParent(t);var r=n.getComponent(l["default"]);r.init(a,this._parcel.rotationPrevision[a])}this.addEmptyPrevision(),this.historyScrollView.scrollToRight(),this.previsionScrollView.scrollToLeft()}},addEmptyPrevision:function(){if(this._parcel.rotationPrevision.length<5){var e=cc.instantiate(this.plantPrefab);e.setParent(this.previsionScrollView.content);var t=e.getComponent(l["default"]);t.init(this._parcel.rotationPrevision.length)}},onBtClose:function(){this.hide()}});cc._RF.pop()},{LanguageData:"LanguageData",Parcel:"Parcel",UIParcelHistoryItem:"UIParcelHistoryItem",UIPopupBase:"UIPopupBase"}],UIPopupBase:[function(e,t,a){"use strict";cc._RF.push(t,"26b02/CIaZOIqLKQKleyE5X","UIPopupBase");var n=cc.Enum({LEFT:0,RIGHT:1,TOP:2,BOTTOM:3});cc.Class({"extends":cc.Component,properties:{Popup:{"default":null,type:cc.Node},From:{"default":n.LEFT,type:n}},initPopup:function(){null==this.Popup&&(this.Popup=this.node),this.Popup.active||(this.Popup.active=!0),this._hidden=!1,this._defaultX=this.Popup.x,this._defaultY=this.Popup.y,this._size=this.Popup.getContentSize(),this.hide(!0)},show:function(){this._hidden&&(this.Popup.stopAllActions(),this.Popup.runAction(cc.moveTo(.2,cc.p(this._defaultX,this._defaultY))),this._hidden=!1,void 0!==this.onShow&&this.onShow())},hide:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this._hidden){this.Popup.stopAllActions();var t=cc.Canvas.instance.node.width,a=cc.Canvas.instance.node.height,r=new cc.Vec2(this._defaultX,this._defaultY);switch(this.From){case n.LEFT:r.x=-t;break;case n.RIGHT:r.x=t;break;case n.TOP:r.y=a;break;case n.BOTTOM:r.y=-a;break;default:cc.error("Invalid from value: "+this.From),r.x=-t}e?(this.Popup.x=r.x,this.Popup.y=r.y):this.Popup.runAction(cc.moveTo(.2,r)),this._hidden=!0,void 0!==this.onHide&&this.onHide()}}}),cc._RF.pop()},{}],UITop:[function(e,t,a){"use strict";function n(e){return e&&e.__esModule?e:{"default":e}}cc._RF.push(t,"5d170x4gqNGn6wYSkUsy2s+","UITop");var r=e("Game"),i=n(r),o=e("Farm"),c=(n(o),new i["default"]),s=e("LanguageData");cc.Class({"extends":cc.Component,editor:{menu:"gof/UITop"},properties:{dateLabel:{"default":null,type:cc.RichText},moneyLabel:{"default":null,type:cc.Label}},onLoad:function(){this.moneyLabel.string="",this.dateLabel.string=""},start:function(){},update:function(e){if(null!=c.phase){var t=c.farm;this.moneyLabel.string=c.farm.money,this.dateLabel.string=s.t("date_value",{year:t.year,month:(t.month+1).toLocaleString(c.config.LANGUAGE_DEFAULT,{minimumIntegerDigits:2}),week:t.week+1})}}}),cc._RF.pop()},{Farm:"Farm",Game:"Game",LanguageData:"LanguageData"}],fr:[function(e,t,a){"use strict";cc._RF.push(t,"686d3MfJx1GtoGUwTQcNuPP","fr"),window.i18n||(window.i18n={}),window.i18n.languages||(window.i18n.languages={}),window.i18n.languages.fr={game_title:"Game of Farms",farmDefaultName:"Mon Exploitation",assollement:"Assollement",parcel:"Parcelle",parcels:"Parcelles",totalSurface:"Surface totale : %{val}",parcelHistory:"Historique d'assollement",date_value:"A+%{year} / M%{month} / S%{week}"},cc._RF.pop()},{}],"polyglot.min":[function(e,t,a){"use strict";cc._RF.push(t,"e26fd9yy65A4q3/JkpVnFYg","polyglot.min");var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e,r){"function"==typeof define&&define.amd?define([],function(){return r(e)}):"object"==("undefined"==typeof a?"undefined":n(a))?t.exports=r(e):e.Polyglot=r(e)}(void 0,function(e){function t(e){e=e||{},this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en",this.allowMissing=!!e.allowMissing,this.warn=e.warn||l}function a(e){var t,a,n,r={};for(t in e)if(e.hasOwnProperty(t)){a=e[t];for(n in a)r[a[n]]=t}return r}function r(e){var t=/^\s+|\s+$/g;return e.replace(t,"")}function i(e,t,a){var n,i,o;return null!=a&&e?(i=e.split(p),o=i[c(t,a)]||i[0],n=r(o)):n=e,n}function o(e){var t=a(h);return t[e]||t.en}function c(e,t){return f[o(e)](t)}function s(e,t){for(var a in t)"_"!==a&&t.hasOwnProperty(a)&&(e=e.replace(new RegExp("%\\{"+a+"\\}","g"),t[a]));return e}function l(t){e.console&&e.console.warn&&e.console.warn("WARNING: "+t)}function u(e){var t={};for(var a in e)t[a]=e[a];return t}t.VERSION="0.4.3",t.prototype.locale=function(e){return e&&(this.currentLocale=e),this.currentLocale},t.prototype.extend=function(e,t){var a;for(var r in e)e.hasOwnProperty(r)&&(a=e[r],t&&(r=t+"."+r),"object"==("undefined"==typeof a?"undefined":n(a))?this.extend(a,r):this.phrases[r]=a)},t.prototype.clear=function(){this.phrases={}},t.prototype.replace=function(e){this.clear(),this.extend(e)},t.prototype.t=function(e,t){var a,n;return t=null==t?{}:t,"number"==typeof t&&(t={smart_count:t}),"string"==typeof this.phrases[e]?a=this.phrases[e]:"string"==typeof t._?a=t._:this.allowMissing?a=e:(this.warn('Missing translation for key: "'+e+'"'),n=e),"string"==typeof a&&(t=u(t),n=i(a,this.currentLocale,t.smart_count),n=s(n,t)),n},t.prototype.has=function(e){return e in this.phrases};var p="||||",f={chinese:function(e){return 0},german:function(e){return 1!==e?1:0},french:function(e){return e>1?1:0},russian:function(e){return e%10===1&&e%100!==11?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},czech:function(e){return 1===e?0:e>=2&&e<=4?1:2},polish:function(e){return 1===e?0:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?1:2},icelandic:function(e){return e%10!==1||e%100===11?1:0}},h={chinese:["fa","id","ja","ko","lo","ms","th","tr","zh"],german:["da","de","en","es","fi","el","he","hu","it","nl","no","pt","sv"],french:["fr","tl","pt-br"],russian:["hr","ru"],czech:["cs"],polish:["pl"],icelandic:["is"]};return t}),cc._RF.pop()},{}]},{},["ApiClient","Farm","Game","GamePhase","MapCtrl","Parcel","Plant","Startup","LocalizedLabelExt","UIDebug","UIOffice","UIParcel","UIParcelButton","UIParcelHistoryItem","UIPopupBase","UITop","fr","LanguageData","LocalizedLabel","LocalizedSprite","SpriteFrameSet","polyglot.min"]);